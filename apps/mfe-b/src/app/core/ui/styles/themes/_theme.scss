/**
 * MFE-B Angular Material Theme
 * EXPERIMENT 03 - Theme compiled from Design Tokens with CSS Variables
 *
 * This MFE compiles its Angular Material theme using CSS custom properties
 * from the shared design-tokens library.
 *
 * Token source: @org/design-tokens (CSS output via project.json styles array)
 * NO hardcoded color values - all derived from CSS variables.
 *
 * MFE-B uses the SAME tokens as MFE-A, demonstrating:
 * - Consistent design language across microfrontends
 * - Single source of truth for colors
 * - No drift between MFE visual styles
 *
 * ARCHITECTURAL NOTES:
 * - CSS tokens loaded via project.json styles array for standalone mode
 * - When loaded via Native Federation, styles array is ignored (shell provides tokens)
 * - Both MFEs use identical CSS variables
 * - Theme is truly self-contained: works standalone AND as remote MFE
 * - No duplication: tokens.css only included when running standalone
 */

@use 'sass:map';
@use '@angular/material' as mat;

// ============================================================================
// PALETTE GENERATION FROM DESIGN TOKENS (CSS Variables)
// Same palettes as MFE-A - ensuring visual consistency
// ============================================================================

/**
 * Primary Palette - Navy (from CSS tokens)
 */
$primary-palette: (
  50: var(--ds-color-base-navy-50),
  100: var(--ds-color-base-navy-100),
  200: var(--ds-color-base-navy-200),
  300: var(--ds-color-base-navy-300),
  400: var(--ds-color-base-navy-400),
  500: var(--ds-color-base-navy-500),
  600: var(--ds-color-base-navy-600),
  700: var(--ds-color-base-navy-700),
  800: var(--ds-color-base-navy-800),
  900: var(--ds-color-base-navy-900),
  A100: var(--ds-color-base-navy-100),
  A200: var(--ds-color-base-navy-200),
  A400: var(--ds-color-base-navy-400),
  A700: var(--ds-color-base-navy-700),
  contrast: (
    50: var(--ds-color-base-neutral-900),
    100: var(--ds-color-base-neutral-900),
    200: var(--ds-color-base-neutral-900),
    300: var(--ds-color-base-neutral-900),
    400: var(--ds-color-base-neutral-0),
    500: var(--ds-color-base-neutral-0),
    600: var(--ds-color-base-neutral-0),
    700: var(--ds-color-base-neutral-0),
    800: var(--ds-color-base-neutral-0),
    900: var(--ds-color-base-neutral-0),
    A100: var(--ds-color-base-neutral-900),
    A200: var(--ds-color-base-neutral-900),
    A400: var(--ds-color-base-neutral-0),
    A700: var(--ds-color-base-neutral-0),
  ),
);

/**
 * Accent Palette - Teal (from CSS tokens)
 */
$accent-palette: (
  50: var(--ds-color-base-teal-50),
  100: var(--ds-color-base-teal-100),
  200: var(--ds-color-base-teal-200),
  300: var(--ds-color-base-teal-300),
  400: var(--ds-color-base-teal-400),
  500: var(--ds-color-base-teal-500),
  600: var(--ds-color-base-teal-600),
  700: var(--ds-color-base-teal-700),
  800: var(--ds-color-base-teal-800),
  900: var(--ds-color-base-teal-900),
  A100: var(--ds-color-base-teal-100),
  A200: var(--ds-color-base-teal-200),
  A400: var(--ds-color-base-teal-400),
  A700: var(--ds-color-base-teal-700),
  contrast: (
    50: var(--ds-color-base-neutral-900),
    100: var(--ds-color-base-neutral-900),
    200: var(--ds-color-base-neutral-900),
    300: var(--ds-color-base-neutral-900),
    400: var(--ds-color-base-neutral-900),
    500: var(--ds-color-base-neutral-0),
    600: var(--ds-color-base-neutral-0),
    700: var(--ds-color-base-neutral-0),
    800: var(--ds-color-base-neutral-0),
    900: var(--ds-color-base-neutral-0),
    A100: var(--ds-color-base-neutral-900),
    A200: var(--ds-color-base-neutral-900),
    A400: var(--ds-color-base-neutral-900),
    A700: var(--ds-color-base-neutral-0),
  ),
);

/**
 * Warn Palette - Red (from CSS tokens)
 */
$warn-palette: (
  50: var(--ds-color-base-red-50),
  100: var(--ds-color-base-red-100),
  200: var(--ds-color-base-red-200),
  300: var(--ds-color-base-red-300),
  400: var(--ds-color-base-red-400),
  500: var(--ds-color-base-red-500),
  600: var(--ds-color-base-red-600),
  700: var(--ds-color-base-red-700),
  800: var(--ds-color-base-red-800),
  900: var(--ds-color-base-red-900),
  A100: var(--ds-color-base-red-100),
  A200: var(--ds-color-base-red-200),
  A400: var(--ds-color-base-red-400),
  A700: var(--ds-color-base-red-700),
  contrast: (
    50: var(--ds-color-base-neutral-900),
    100: var(--ds-color-base-neutral-900),
    200: var(--ds-color-base-neutral-900),
    300: var(--ds-color-base-neutral-900),
    400: var(--ds-color-base-neutral-0),
    500: var(--ds-color-base-neutral-0),
    600: var(--ds-color-base-neutral-0),
    700: var(--ds-color-base-neutral-0),
    800: var(--ds-color-base-neutral-0),
    900: var(--ds-color-base-neutral-0),
    A100: var(--ds-color-base-neutral-900),
    A200: var(--ds-color-base-neutral-0),
    A400: var(--ds-color-base-neutral-0),
    A700: var(--ds-color-base-neutral-0),
  ),
);

// Define Material palettes
$mat-primary: mat.define-palette($primary-palette, 900, 500, 900);
$mat-accent: mat.define-palette($accent-palette, 500, 300, 700);
$mat-warn: mat.define-palette($warn-palette, 500, 300, 700);

// ============================================================================
// THEME DEFINITION
// ============================================================================

$mfe-b-theme: mat.define-light-theme(
  (
    color: (
      primary: $mat-primary,
      accent: $mat-accent,
      warn: $mat-warn,
    ),
    typography: mat.define-typography-config(
      $font-family: var(--ds-font-family-sans),
      $headline-1: mat.define-typography-level(
        var(--ds-font-size-4xl),
        var(--ds-font-line-height-tight),
        var(--ds-font-weight-bold)
      ),
      $headline-2: mat.define-typography-level(
        var(--ds-font-size-3xl),
        var(--ds-font-line-height-tight),
        var(--ds-font-weight-bold)
      ),
      $headline-3: mat.define-typography-level(
        var(--ds-font-size-2xl),
        var(--ds-font-line-height-snug),
        var(--ds-font-weight-medium)
      ),
      $headline-4: mat.define-typography-level(
        var(--ds-font-size-xl),
        var(--ds-font-line-height-snug),
        var(--ds-font-weight-medium)
      ),
      $headline-5: mat.define-typography-level(
        var(--ds-font-size-lg),
        var(--ds-font-line-height-normal),
        var(--ds-font-weight-medium)
      ),
      $headline-6: mat.define-typography-level(
        var(--ds-font-size-base),
        var(--ds-font-line-height-normal),
        var(--ds-font-weight-medium)
      ),
      $body-1: mat.define-typography-level(
        var(--ds-font-size-base),
        var(--ds-font-line-height-relaxed),
        var(--ds-font-weight-regular)
      ),
      $body-2: mat.define-typography-level(
        var(--ds-font-size-sm),
        var(--ds-font-line-height-normal),
        var(--ds-font-weight-regular)
      ),
      $caption: mat.define-typography-level(
        var(--ds-font-size-xs),
        var(--ds-font-line-height-normal),
        var(--ds-font-weight-regular)
      ),
      $button: mat.define-typography-level(
        var(--ds-font-size-sm),
        var(--ds-font-line-height-none),
        var(--ds-font-weight-medium)
      ),
    ),
    density: 0,
  )
);

// ============================================================================
// THEME APPLICATION MIXIN
// ============================================================================

/**
 * Apply theme mixin - to be called from component styles.
 *
 * IMPORTANT: This generates global CSS. When loaded via Native Federation,
 * component styleUrls are processed, but global styles.scss is not.
 * Therefore, this mixin should be called from BaseLayoutComponent styles.
 *
 * GLOBAL SIDE EFFECTS (unavoidable with Angular Material):
 * - mat.core(): CDK overlay, a11y, ripple styles
 * - mat.all-component-themes(): Material component styles, :root CSS vars
 */
@mixin apply-theme() {
  @include mat.core();
  @include mat.all-component-themes($mfe-b-theme);
}
